<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Overdue notice -->
    <record id="email_template_overdue_notice" model="mail.template">
        <field name="name">Overdue Book Notice</field>
        <field name="model_id" ref="model_library_loan"/>
        <field name="subject">[Library] Your book is overdue</field>
        <field name="email_from">${(object.env.company.email or 'noreply@library.local')}</field>
        <field name="email_to">${object.member_id.email or ''}</field>
        <field name="body_html"><![CDATA[
            <p>Dear ${object.member_id.name},</p>
            <p>The book <b>${object.book_id.name}</b> (copy: ${object.book_copy_id.name}) is overdue by <b>${object.late_days}</b> days.</p>
            <p>Current fine: <b>${object.fine_amount}</b> VND.</p>
            <p>Please return it as soon as possible or contact the library.</p>
            <p>Regards,<br/>Library Team</p>
        ]]></field>
    </record>

    <!-- Return reminder (2 days before due) -->
    <record id="email_template_return_reminder" model="mail.template">
        <field name="name">Return Reminder</field>
        <field name="model_id" ref="model_library_loan"/>
        <field name="subject">[Library] Reminder: Book return in 2 days</field>
        <field name="email_from">${(object.env.company.email or 'noreply@library.local')}</field>
        <field name="email_to">${object.member_id.email or ''}</field>
        <field name="body_html"><![CDATA[
            <p>Dear ${object.member_id.name},</p>
            <p>This is a friendly reminder that your borrowed book <b>${object.book_id.name}</b> (copy: ${object.book_copy_id.name}) is due on <b>${object.expected_return}</b>.</p>
            <p>Please return or renew before the due date to avoid fines.</p>
            <p>Regards,<br/>Library Team</p>
        ]]></field>
    </record>

    <!-- Reservation ready notice -->
    <record id="email_template_reservation_ready" model="mail.template">
        <field name="name">Reservation Ready for Pickup</field>
        <field name="model_id" ref="model_library_reservation"/>
        <field name="subject">[Library] Your reserved book is ready for pickup</field>
        <field name="email_from">${(object.env.company.email or 'noreply@library.local')}</field>
        <field name="email_to">${object.member_id.email or ''}</field>
        <field name="body_html"><![CDATA[
            <p>Dear ${object.member_id.name},</p>
            <p>Your reserved book <b>${object.book_id.name}</b> is now available for pickup. Please collect within 2 days (until ${object.reserve_date + relativedelta(days=2)}).</p>
            <p>Regards,<br/>Library Team</p>
        ]]></field>
    </record>
</odoo>
